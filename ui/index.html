<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeatMemo - Infinite Canvas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 画面1: プロジェクト一覧 -->
    <div id="view-project-list" class="view">
        <header id="project-header">
            <h1>NeatMemo</h1>
        </header>
        <div id="project-actions">
            <button id="btn-new-project" class="primary-btn">+ 新規プロジェクト</button>
        </div>
        <div id="project-grid">
            <!-- 動的にProjectCardが追加される -->
        </div>
    </div>

    <!-- 画面2: キャンバス -->
    <div id="view-canvas" class="view" style="display: none;">
        <!-- ナビゲーションバー -->
        <div id="canvas-navbar">
            <button id="btn-back" class="nav-btn">← 戻る</button>
            <span id="current-project-name"></span>
        </div>

        <!-- ツールバー -->
        <div id="toolbar">
            <button class="tool-btn active" id="btn-text" title="ダブルクリックで配置">テキスト</button>
            <button class="tool-btn" id="btn-ocr" title="画像からテキスト抽出">OCR</button>
            <button class="tool-btn" id="btn-image" title="画像をそのまま配置">画像</button>
            <button class="tool-btn" id="btn-pen" title="ペンで描画">ペン</button>
            <button class="tool-btn" id="btn-save">保存</button>
        </div>

        <!-- 隠しファイル入力（画像アップロード用） -->
        <input type="file" id="ocr-input" accept="image/png,image/jpeg,image/jpg" hidden>
        <input type="file" id="image-input" accept="image/png,image/jpeg,image/jpg" hidden>

        <!-- ドラッグ&ドロップオーバーレイ -->
        <div id="drop-overlay">
            <div class="drop-overlay-content">
                <span class="drop-icon">📷</span>
                <span>画像をドロップして配置</span>
            </div>
        </div>

        <!-- ローディングオーバーレイ -->
        <div id="loading-overlay">
            <div class="loading-content">
                <div class="spinner"></div>
                <span>OCR処理中...</span>
            </div>
        </div>

        <!-- キャンバス領域 -->
        <div id="canvas-area">
            <!-- ここに動的に要素が追加されます -->
        </div>

        <!-- 右クリックメニュー -->
        <div id="context-menu" class="context-menu">
            <button class="context-menu-item" data-action="add-text">テキストを追加</button>
            <button class="context-menu-item" data-action="add-ocr">OCRで画像からテキスト抽出</button>
            <button class="context-menu-item" data-action="add-image">画像を追加</button>
            <button class="context-menu-item" data-action="add-pen">ペンで描画</button>
        </div>
    </div>

    <!-- プロジェクト名入力モーダル -->
    <div id="project-modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title">新規プロジェクト</h2>
            <input type="text" id="project-name-input" placeholder="プロジェクト名を入力" autocomplete="off">
            <div class="modal-actions">
                <button id="modal-cancel" class="modal-btn">キャンセル</button>
                <button id="modal-confirm" class="modal-btn primary">作成</button>
            </div>
        </div>
    </div>


    <!-- トースト通知コンテナ -->
    <div id="toast-container"></div>

    <!-- 設定読み込み (ローカル実行時は404になりますが無視して動作するようにJSで作ります) -->
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
